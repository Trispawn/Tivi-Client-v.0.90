<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VideoShorts - Tus Videos</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }
        
        body {
            background: #000;
            color: white;
            height: 100vh;
            overflow: hidden;
            touch-action: pan-y;
        }
        
        /* Contenedor principal */
        .container {
            position: relative;
            height: 100vh;
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            overflow: hidden;
        }
        
        /* Pantalla de inicio */
        .start-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            text-align: center;
            padding: 20px;
        }
        
        .start-btn {
            background: #ff0050;
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 18px;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 30px;
            font-weight: bold;
        }
        
        .logo {
            font-size: 32px;
            font-weight: bold;
            background: linear-gradient(45deg, #ff0050, #00f0ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
        }
        
        /* Videos */
        .video-container {
            height: 100vh;
            overflow-y: auto;
            scroll-snap-type: y mandatory;
        }
        
        .video-container::-webkit-scrollbar {
            display: none;
        }
        
        .video-item {
            height: 100vh;
            width: 100%;
            position: relative;
            scroll-snap-align: start;
        }
        
        video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            background: #000;
        }
        
        /* Informaci贸n del video */
        .video-info {
            position: absolute;
            bottom: 80px;
            left: 0;
            right: 0;
            padding: 0 20px 20px;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
        }
        
        .video-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .video-author {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
        }
        
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        /* Acciones */
        .video-actions {
            position: absolute;
            right: 20px;
            bottom: 150px;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .action-btn {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            text-align: center;
        }
        
        .action-count {
            font-size: 12px;
            display: block;
            margin-top: 5px;
        }
        
        /* Temporizador para siguiente video */
        .next-timer {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.8);
            padding: 15px 30px;
            border-radius: 10px;
            text-align: center;
            display: none;
            z-index: 10;
            border: 2px solid #ff0050;
        }
        
        .next-timer.show {
            display: block;
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }
        
        .skip-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            margin-top: 10px;
            cursor: pointer;
        }
        
        /* Contador */
        .counter {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0,0,0,0.5);
            padding: 5px 10px;
            border-radius: 10px;
            font-size: 12px;
            z-index: 5;
        }
        
        /* Header */
        .header {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(to bottom, rgba(0,0,0,0.8), transparent);
            z-index: 5;
        }
        
        .random-btn {
            background: rgba(255,255,255,0.1);
            border: none;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
        }
        
        /* Mensaje de error */
        .error-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            background: rgba(255,0,0,0.2);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(255,0,0,0.5);
        }
        
        .retry-btn {
            background: #ff0050;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            margin-top: 15px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <!-- Pantalla de inicio -->
    <div class="start-screen" id="startScreen">
        <div class="logo">VIDEOSHORTS</div>
        <p>Haz clic para comenzar a ver videos</p>
        <button class="start-btn" id="startBtn">讹 COMENZAR</button>
        <p style="margin-top: 20px; font-size: 14px; opacity: 0.7;">Los videos pasar谩n autom谩ticamente al terminar</p>
    </div>
    
    <!-- Contenedor principal -->
    <div class="container" id="mainContainer" style="display: none;">
        <div class="header">
            <div class="logo" style="font-size: 20px;">VIDEOSHORTS</div>
            <button class="random-btn" id="shuffleBtn"> Aleatorio</button>
        </div>
        
        <div class="counter" id="counter">Video 1/3</div>
        
        <!-- Aqu铆 van los videos -->
        <div class="video-container" id="videoContainer"></div>
        
        <!-- Temporizador para siguiente video -->
        <div class="next-timer" id="nextTimer">
            Siguiente video en <span id="countdown">1</span>s...
            <br>
            <button class="skip-btn" id="cancelBtn">锔 Cancelar</button>
        </div>
    </div>

    <script>
        // ============================================
        // CONFIGURACIN: PON TUS VIDEOS AQU
        // ============================================
        const videoData = [
            {
                id: 1,
                title: "Mi Video 1",
                author: "T煤",
                // Cambia esta URL por tu video de GitHub
                videoUrl: "https://raw.githubusercontent.com/Trispawn/chattivi/main/assets/video1.mp4",
                likes: "125K",
                comments: "2.3K",
                shares: "5K"
            },
            {
                id: 2,
                title: "Mi Video 2",
                author: "T煤",
                // Cambia esta URL por tu video de GitHub
                videoUrl: "https://raw.githubusercontent.com/Trispawn/chattivi/main/assets/video2.mp4",
                likes: "89K",
                comments: "1.5K",
                shares: "3.2K"
            },
            {
                id: 3,
                title: "Mi Video 3",
                author: "T煤",
                // Cambia esta URL por tu video de GitHub
                videoUrl: "https://raw.githubusercontent.com/Trispawn/chattivi/main/assets/video3.mp4",
                likes: "210K",
                comments: "4.7K",
                shares: "12K"
            }
        ];

        // ============================================
        // VARIABLES GLOBALES
        // ============================================
        let currentVideoIndex = 0;
        let videoElements = [];
        let nextTimer = null;
        let countdownInterval = null;
        let userHasInteracted = false;

        // ============================================
        // ELEMENTOS DEL DOM
        // ============================================
        const startScreen = document.getElementById('startScreen');
        const mainContainer = document.getElementById('mainContainer');
        const startBtn = document.getElementById('startBtn');
        const videoContainer = document.getElementById('videoContainer');
        const counter = document.getElementById('counter');
        const nextTimerEl = document.getElementById('nextTimer');
        const countdownEl = document.getElementById('countdown');
        const cancelBtn = document.getElementById('cancelBtn');
        const shuffleBtn = document.getElementById('shuffleBtn');

        // ============================================
        // INICIAR LA APLICACIN
        // ============================================
        function initApp() {
            console.log("Aplicaci贸n iniciada");
            
            // Configurar evento del bot贸n de inicio
            startBtn.addEventListener('click', startApp);
            
            // Tambi茅n permitir inicio con cualquier clic en la pantalla
            startScreen.addEventListener('click', startApp);
            
            // O con tecla ESPACIO/ENTER
            document.addEventListener('keydown', (e) => {
                if (!userHasInteracted && (e.code === 'Space' || e.code === 'Enter')) {
                    startApp();
                }
            });
        }

        // ============================================
        // COMENZAR LA APLICACIN
        // ============================================
        function startApp() {
            if (userHasInteracted) return;
            
            userHasInteracted = true;
            console.log("Usuario interactu贸, comenzando aplicaci贸n...");
            
            // Ocultar pantalla de inicio
            startScreen.style.opacity = '0';
            setTimeout(() => {
                startScreen.style.display = 'none';
                mainContainer.style.display = 'block';
                
                // Cargar los videos
                loadAllVideos();
            }, 500);
        }

        // ============================================
        // CARGAR TODOS LOS VIDEOS
        // ============================================
        function loadAllVideos() {
            // Limpiar contenedor
            videoContainer.innerHTML = '';
            videoElements = [];
            
            // Crear elementos para cada video
            videoData.forEach((video, index) => {
                const videoItem = document.createElement('div');
                videoItem.className = 'video-item';
                videoItem.id = `video-${video.id}`;
                
                videoItem.innerHTML = `
                    <video id="video-player-${video.id}" playsinline preload="auto">
                        <source src="${video.videoUrl}" type="video/mp4">
                        Tu navegador no soporta videos.
                    </video>
                    <div class="video-info">
                        <div class="video-title">${video.title}</div>
                        <div class="video-author">
                            <div class="avatar">${video.author.charAt(0)}</div>
                            <span>${video.author}</span>
                        </div>
                    </div>
                    <div class="video-actions">
                        <button class="action-btn like-btn" data-id="${video.id}">わ<br><span class="action-count">${video.likes}</span></button>
                        <button class="action-btn comment-btn" data-id="${video.id}"><br><span class="action-count">${video.comments}</span></button>
                        <button class="action-btn share-btn" data-id="${video.id}">锔<br><span class="action-count">${video.shares}</span></button>
                    </div>
                `;
                
                videoContainer.appendChild(videoItem);
                
                // Obtener el elemento de video
                const videoEl = videoItem.querySelector(`#video-player-${video.id}`);
                videoElements.push(videoEl);
                
                // Configurar eventos del video
                setupVideoEvents(videoEl, video.id, index);
            });
            
            // Actualizar contador
            updateCounter();
            
            // Reproducir el primer video
            setTimeout(() => {
                playVideo(currentVideoIndex);
            }, 100);
            
            // Configurar bot贸n de cancelar
            cancelBtn.addEventListener('click', cancelNextVideo);
            
            // Configurar bot贸n de aleatorio
            shuffleBtn.addEventListener('click', shuffleVideos);
            
            // Configurar scroll
            setupScrollBehavior();
            
            // Configurar botones de acci贸n
            setupActionButtons();
        }

        // ============================================
        // CONFIGURAR EVENTOS DEL VIDEO
        // ============================================
        function setupVideoEvents(videoEl, videoId, index) {
            // Cuando el video termina
            videoEl.addEventListener('ended', () => {
                console.log(`Video ${index + 1} terminado`);
                startNextVideoTimer();
            });
            
            // Error al cargar video
            videoEl.addEventListener('error', (e) => {
                console.error(`Error cargando video ${videoId}:`, e);
                showError(videoId, "Error cargando video");
            });
            
            // Cuando el video se puede reproducir
            videoEl.addEventListener('canplay', () => {
                console.log(`Video ${videoId} listo para reproducir`);
            });
        }

        // ============================================
        // REPRODUCIR UN VIDEO ESPECFICO
        // ============================================
        function playVideo(index) {
            // Pausar todos los videos
            videoElements.forEach(video => {
                video.pause();
            });
            
            // Reproducir el video actual
            const currentVideo = videoElements[index];
            if (currentVideo) {
                currentVideo.currentTime = 0;
                currentVideo.play().then(() => {
                    console.log(`Reproduciendo video ${index + 1}`);
                }).catch(error => {
                    console.error("Error al reproducir:", error);
                    // Intentar de nuevo despu茅s de 1 segundo
                    setTimeout(() => playVideo(index), 1000);
                });
                
                // Hacer scroll al video
                scrollToVideo(index);
                updateCounter();
            }
        }

        // ============================================
        // INICIAR TEMPORIZADOR PARA SIGUIENTE VIDEO
        // ============================================
        function startNextVideoTimer() {
            // Limpiar temporizador anterior
            clearTimeout(nextTimer);
            clearInterval(countdownInterval);
            
            // Mostrar temporizador
            nextTimerEl.classList.add('show');
            
            // Iniciar cuenta regresiva
            let countdown = 1;
            countdownEl.textContent = countdown;
            
            // Actualizar cuenta cada segundo
            countdownInterval = setInterval(() => {
                countdown--;
                if (countdown > 0) {
                    countdownEl.textContent = countdown;
                } else {
                    clearInterval(countdownInterval);
                    goToNextVideo();
                }
            }, 1000);
            
            // Timer de respaldo
            nextTimer = setTimeout(() => {
                clearInterval(countdownInterval);
                goToNextVideo();
            }, 1000);
        }

        // ============================================
        // CANCELAR CAMBIO DE VIDEO
        // ============================================
        function cancelNextVideo() {
            clearTimeout(nextTimer);
            clearInterval(countdownInterval);
            nextTimerEl.classList.remove('show');
            
            // Reiniciar el video actual
            const currentVideo = videoElements[currentVideoIndex];
            if (currentVideo) {
                currentVideo.currentTime = 0;
                currentVideo.play();
            }
        }

        // ============================================
        // IR AL SIGUIENTE VIDEO
        // ============================================
        function goToNextVideo() {
            // Ocultar temporizador
            nextTimerEl.classList.remove('show');
            
            // Calcular siguiente 铆ndice
            currentVideoIndex = (currentVideoIndex + 1) % videoData.length;
            
            // Reproducir siguiente video
            playVideo(currentVideoIndex);
        }

        // ============================================
        // IR AL VIDEO ANTERIOR
        // ============================================
        function goToPrevVideo() {
            // Ocultar temporizador
            nextTimerEl.classList.remove('show');
            clearTimeout(nextTimer);
            clearInterval(countdownInterval);
            
            // Calcular 铆ndice anterior
            currentVideoIndex = currentVideoIndex === 0 ? videoData.length - 1 : currentVideoIndex - 1;
            
            // Reproducir video anterior
            playVideo(currentVideoIndex);
        }

        // ============================================
        // SCROLL AL VIDEO ACTUAL
        // ============================================
        function scrollToVideo(index) {
            const videoHeight = window.innerHeight;
            videoContainer.scrollTo({
                top: index * videoHeight,
                behavior: 'smooth'
            });
        }

        // ============================================
        // CONFIGURAR COMPORTAMIENTO DE SCROLL
        // ============================================
        function setupScrollBehavior() {
            let isScrolling = false;
            
            videoContainer.addEventListener('scroll', () => {
                if (!isScrolling) {
                    isScrolling = true;
                    
                    // Calcular qu茅 video est谩 visible
                    const scrollTop = videoContainer.scrollTop;
                    const windowHeight = window.innerHeight;
                    const newIndex = Math.round(scrollTop / windowHeight);
                    
                    // Si cambi贸 de video
                    if (newIndex !== currentVideoIndex && newIndex >= 0 && newIndex < videoData.length) {
                        // Cancelar temporizador si existe
                        nextTimerEl.classList.remove('show');
                        clearTimeout(nextTimer);
                        clearInterval(countdownInterval);
                        
                        // Actualizar 铆ndice y reproducir
                        currentVideoIndex = newIndex;
                        playVideo(currentVideoIndex);
                    }
                    
                    // Permitir nuevo scroll despu茅s de un tiempo
                    setTimeout(() => {
                        isScrolling = false;
                    }, 100);
                }
            });
        }

        // ============================================
        // ACTUALIZAR CONTADOR
        // ============================================
        function updateCounter() {
            counter.textContent = `Video ${currentVideoIndex + 1}/${videoData.length}`;
        }

        // ============================================
        // MEZCLAR VIDEOS
        // ============================================
        function shuffleVideos() {
            // Algoritmo para mezclar
            for (let i = videoData.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [videoData[i], videoData[j]] = [videoData[j], videoData[i]];
            }
            
            // Volver al primer video
            currentVideoIndex = 0;
            
            // Recargar videos en nuevo orden
            loadAllVideos();
            
            // Mostrar notificaci贸n
            showNotification(" Videos mezclados");
        }

        // ============================================
        // CONFIGURAR BOTONES DE ACCIN
        // ============================================
        function setupActionButtons() {
            // Botones de like
            document.querySelectorAll('.like-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const videoId = this.getAttribute('data-id');
                    const countEl = this.querySelector('.action-count');
                    let count = parseInt(countEl.textContent);
                    countEl.textContent = (count + 1) + 'K';
                    this.style.color = '#ff0050';
                });
            });
            
            // Botones de comentario
            document.querySelectorAll('.comment-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const videoId = this.getAttribute('data-id');
                    showNotification(` Comentarios del video ${videoId}`);
                });
            });
            
            // Botones de compartir
            document.querySelectorAll('.share-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const videoId = this.getAttribute('data-id');
                    showNotification(`锔 Compartir video ${videoId}`);
                });
            });
        }

        // ============================================
        // MOSTRAR ERROR
        // ============================================
        function showError(videoId, message) {
            const videoItem = document.getElementById(`video-${videoId}`);
            if (videoItem) {
                const errorDiv = document.createElement('div');
                errorDiv.className = 'error-message';
                errorDiv.innerHTML = `
                    <h3>锔 Error</h3>
                    <p>${message}</p>
                    <p>Verifica que el archivo exista en GitHub:</p>
                    <p style="font-size: 12px; word-break: break-all;">${videoData.find(v => v.id == videoId).videoUrl}</p>
                    <button class="retry-btn" onclick="retryVideo(${videoId})">Reintentar</button>
                `;
                videoItem.appendChild(errorDiv);
            }
        }

        // ============================================
        // REINTENTAR VIDEO (funci贸n global)
        // ============================================
        window.retryVideo = function(videoId) {
            const videoItem = document.getElementById(`video-${videoId}`);
            if (videoItem) {
                const errorDiv = videoItem.querySelector('.error-message');
                if (errorDiv) errorDiv.remove();
                
                const videoEl = videoItem.querySelector(`#video-player-${videoId}`);
                if (videoEl) {
                    videoEl.load();
                    videoEl.play();
                }
            }
        };

        // ============================================
        // MOSTRAR NOTIFICACIN
        // ============================================
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: rgba(255,255,255,0.15);
                backdrop-filter: blur(10px);
                padding: 12px 24px;
                border-radius: 10px;
                z-index: 1000;
                animation: fadeInOut 2s;
                border: 1px solid rgba(255,255,255,0.2);
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 2000);
        }

        // ============================================
        // NAVEGACIN CON TECLADO
        // ============================================
        document.addEventListener('keydown', (e) => {
            if (!userHasInteracted) return;
            
            switch(e.code) {
                case 'ArrowRight':
                    e.preventDefault();
                    goToNextVideo();
                    break;
                    
                case 'ArrowLeft':
                    e.preventDefault();
                    goToPrevVideo();
                    break;
                    
                case 'Space':
                    e.preventDefault();
                    const currentVideo = videoElements[currentVideoIndex];
                    if (currentVideo) {
                        if (currentVideo.paused) {
                            currentVideo.play();
                        } else {
                            currentVideo.pause();
                        }
                    }
                    break;
                    
                case 'KeyR':
                    e.preventDefault();
                    shuffleVideos();
                    break;
            }
        });

        // ============================================
        // AADIR ANIMACIN CSS
        // ============================================
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeInOut {
                0% { opacity: 0; transform: translateX(-50%) translateY(20px); }
                20% { opacity: 1; transform: translateX(-50%) translateY(0); }
                80% { opacity: 1; transform: translateX(-50%) translateY(0); }
                100% { opacity: 0; transform: translateX(-50%) translateY(-20px); }
            }
        `;
        document.head.appendChild(style);

        // ============================================
        // INICIAR LA APLICACIN
        // ============================================
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
